@model PiesListViewModel


<h1>@Model.CurrentCategory</h1>

<form asp-controller="Pie" asp-action="List" method="post" class="form-horizontal">
    <div class="form-group">
        @if (Model.CurrentCategory == "All pies")
        {
            <label class="col-md-2 control-label">Select Category</label>
            <div class="col-md-2">
                <select class="form-control" 
                        asp-for="CategoryName" 
                        name="Category" 
                        asp-items="@(new SelectList(Model.Categories, "CategoryName", "CategoryName"))"></select>
            </div>
        }
        @if (Model.CurrentCategory != null)
        {
            <div>
                <label class="col-md-2 control-label">Name:</label>
            </div>
            <div class="col-md-5">
                <input type="text" class="form-control" name="PieNameSearch" />
            </div>
            <div>
                <button type="submit" class="btn">Filter</button>
            </div>
        }
        @if (Model.CurrentCategory == null)
        {
            <label class="col-md-2 control-label">Select Category</label>
            <div class="col-md-2">
                <select class="form-control" asp-for="CategoryName" name="Category" asp-items="@(new SelectList(Model.Categories, "CategoryName", "CategoryName"))"></select>
            </div>
            <div>
                <label class="col-md-2 control-label pull-left">Name:</label>
            </div>
            <div class="col-md-5">
                <input type="text" class="form-control" name="PieNameSearch" />
            </div>
            <div>
                <button type="submit" class="btn">Filter</button>
            </div>
        }
    </div>
</form>


@foreach (var pie in Model.Pies)
{
    <partial name="_PieCard" model="pie" />
}
